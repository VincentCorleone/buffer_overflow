{
  "name": "Buffer overflow",
  "tagline": "A c program on windows showing a example of buffer overflow",
  "body": "This is a c program on windows showing a example of buffer overflow.\r\n#Knowledge backgroud\r\nWhen a function is called,the parameters of it and a address will be pushed in to the stack.This address(let us call it RET)  points to a instruction which will be executed next if the function call didn't happen.Then internal variables of the called function will be pushed into the stack.\r\nThe later something is pushed to the stack,the lower the logic address of it in the memory will be.So the internal variable has lower address than RET.If we set the the value of the internal variable longer that it should be,we can override the value of the RET.Then the program will execute the instruction pointed by the RET,which is modified by us.\r\n\r\n#Explanations on this c program\r\n```c\r\n#include <stdio.h>\r\n#include <string.h>\r\n\r\nvoid overflow(const char* input)\r\n{\r\n    char buf[8];\r\n    printf(\"Virtual address of 'buf' = Ox%p\\n\", buf);\r\n    strcpy(buf,input);\r\n}\r\n\r\nvoid fun()\r\n{\r\n    printf(\"Function 'fun' has been called without an explicitly invocation.\\n\");\r\n    printf(\"Buffer Overflow attack succeeded!\\n\");\r\n}\r\n\r\nint main(int argc, char* argv[])\r\n{\r\n    printf(\"Virtual address of 'overflow' = Ox%p\\n\",overflow);\r\n    printf(\"Virtual address of 'fun' = Ox%p\\n\",fun);\r\n    char input[30]=\"01234567890123456789\";\r\n    char add[5];\r\n    *((int*)add) = fun;\r\n    add[4] = 0;\r\n    strcat(input, add);\r\n    overflow(input);\r\n    return 0;\r\n}\r\n```\r\n\r\nThe function main() will call the function overflow(),then return to main().In normal circumstances,the function fun() will not be executed.But using the knowledge above we can let the function fun() be executed.\r\n\r\n\r\n![Paste_Image.png](http://upload-images.jianshu.io/upload_images/1788625-ac495430e79b26aa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\r\n\r\nfunction fun() is executed!\r\n\r\n#How to run this c program\r\nOn windows OS,you'd better use mingw to compile it.A [mingw-get-inst-20120426.exe] is provided here.\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}